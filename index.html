<!doctype html>
<html lang=es-ES>
  <head>
    <meta charset='utf-8'>
    <title>La Corneta de Aire</title>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='description' content='Como se escucha una Corneta de Aire.'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='canonical' href='https://airhorner.com/'>
    <link rel='manifest' href='manifest.json'>
    <meta name='mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='application-name' content='Air Horner'>
    <meta name='apple-mobile-web-app-status-bar-style' content='black'>
    <meta name='apple-mobile-web-app-title' content='Air Horner'>
    <link rel=icon sizes=192x192 href=/images/touch/Airhorner_192.png>
    <link rel=apple-touch-icon href=/images/touch/Airhorner_192.png>
    <meta name='msapplication-TileImage' content='/images/touch/Airhorner_144.png'>
    <meta name='msapplication-TileColor' content='#2196F3'>
    <meta name='theme-color' content='#2196F3'>
    <link rel='stylesheet' href='/styles/main.css'>
  </head>
  <body>
    <div id='container'>
      <div id='airhorn'>
        <div class='horn'>
          <div class='inner'>
            <div class='center'></div>
          </div>
        </div>
      </div>
    </div>
    <div id='installer'>
      <button class='button'>Install</button>
      <span class='tooltip'></span>
    </div>
    <script src=/scripts/main.min.js></script>
    <script>
      if('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js')
          .then(function(registration) {
                console.log('Service Worker Registered');
          });

        navigator.serviceWorker.ready.then(function(registration) {
           console.log('Service Worker Ready');
        });
      }
      
   window.addEventListener('load', function() {

      var outputElement = document.getElementById('output');
       
      window.addEventListener('beforeinstallprompt', function(e) {
        outputElement.textContent = 'beforeinstallprompt Event fired';
        
        // e.userChoice will return a Promise. For more details read: http://www.html5rocks.com/en/tutorials/es6/promises/
        e.userChoice.then(function(choiceResult) {
          
          console.log(choiceResult.outcome);
          
            if(choiceResult.outcome == 'dismissed') {
              console.log('User cancelled homescreen install');
            }
            else {
              console.log('User added to homescreen');
            }
        });
        
      });
      
   });
    </script>
    <pre id="output"></pre>
  </body>
</html>
